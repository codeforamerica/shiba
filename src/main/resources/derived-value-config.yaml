conditionAnchors:
  - &useEnrichedHomeAddress?
    pageName: homeAddressValidation
    input: useEnrichedAddress
    value: "true"
derived-values:
  - groupName: ccapHasCostsForChildCare
    fieldName: ccapHasCostsForChildCare
    values:
      - value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "true"
        type: ENUMERATED_SINGLE_VALUE
        condition:
          logicalOperator: AND
          conditions:
            - pageName: goingToSchool
              input: goingToSchool
              value: "true"
            - pageName: choosePrograms
              input: programs
              value: CCAP
      - value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "true"
        type: ENUMERATED_SINGLE_VALUE
        condition:
          logicalOperator: AND
          conditions:
            - pageName: ccapJob
              input: currentlyLookingForJob
              value: "true"
            - pageName: choosePrograms
              input: programs
              value: CCAP
  - groupName: energyAssistanceGroup
    fieldName: energyAssistanceInput
    values:
      - type: ENUMERATED_SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: energyAssistanceMoreThan20
          inputName: energyAssistanceMoreThan20
        condition:
          logicalOperator: OR
          conditions:
            - pageName: energyAssistance
              input: energyAssistance
              value: "true"
      - type: ENUMERATED_SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "false"
        condition:
          logicalOperator: OR
          conditions:
            - pageName: energyAssistance
              input: energyAssistance
              value: "false"
  - groupName: registerToVote
    fieldName: registerToVoteSelection
    values:
      - type: ENUMERATED_SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "true"
        condition:
          logicalOperator: OR
          conditions:
            - pageName: registerToVote
              input: registerToVote
              value: "YES"
      - type: ENUMERATED_SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "false"
        condition:
          logicalOperator: OR
          conditions:
            - pageName: registerToVote
              input: registerToVote
              value: "NO_ALREADY_REGISTERED"
      - type: ENUMERATED_SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "false"
        condition:
          logicalOperator: OR
          conditions:
            - pageName: registerToVote
              input: registerToVote
              value: "NO"
  - groupName: contactInfo
    fieldName: communicationOptIn
    values:
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: Email and text
        condition:
          logicalOperator: AND
          conditions:
            - pageName: contactInfo
              input: phoneOrEmail
              value: EMAIL
              matcher: CONTAINS
            - pageName: contactInfo
              input: phoneOrEmail
              value: TEXT
              matcher: CONTAINS
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: Email
        condition:
          conditions:
            - pageName: contactInfo
              input: phoneOrEmail
              value: EMAIL
              matcher: CONTAINS
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: Text
        condition:
          conditions:
            - pageName: contactInfo
              input: phoneOrEmail
              value: TEXT
              matcher: CONTAINS
  - groupName: homeAddress
    fieldName: isHomelessIndicator
    values:
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.LiteralDerivedValueConfiguration
          literal: "homeless"
        condition:
          conditions:
            - pageName: homeAddress
              input: isHomeless
              value: "true"
  - groupName: homeAddress
    fieldName: selectedApartmentNumber
    values:
      - value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: enrichedApartmentNumber
        type: SINGLE_VALUE
        condition:
          conditions:
            - *useEnrichedHomeAddress?
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: apartmentNumber
  - groupName: homeAddress
    fieldName: selectedCity
    values:
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: enrichedCity
        condition:
          conditions:
            - *useEnrichedHomeAddress?
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: city
  - groupName: homeAddress
    fieldName: selectedState
    values:
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: enrichedState
        condition:
          conditions:
            - *useEnrichedHomeAddress?
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: state
  - groupName: homeAddress
    fieldName: selectedZipCode
    values:
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: enrichedZipCode
        condition:
          conditions:
            - *useEnrichedHomeAddress?
      - type: SINGLE_VALUE
        value: !!org.codeforamerica.shiba.output.ReferenceDerivedValueConfiguration
          pageName: homeAddress
          inputName: zipCode
