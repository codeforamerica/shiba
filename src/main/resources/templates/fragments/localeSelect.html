<!DOCTYPE html>
<html th:lang="${#locale.language}" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="localeSelect" class="select toolbar__right language-select" th:with="lang=${#locale.toString()}">
    <label th:text="#{language-preferences.title}" class="sr-only" for="locales"></label>
    <select class="select__element language-selector"  name="locales" id="locales">
        <option value="en" th:selected="${lang.equals('en')}" th:text="#{language-preferences.english}"></option>
        <option value="es" th:selected="${lang.equals('es')}" th:text="#{language-preferences.spanish}"></option>
    </select>
    <script>
        $(document).ready(function() {
            $("#locales").change(function () {
                if ($("#locales").val() !== ''){
                    window.location.replace('?lang=' + $("#locales").val());
                }
            });
        });
    </script>
</div>
</body>
</html>