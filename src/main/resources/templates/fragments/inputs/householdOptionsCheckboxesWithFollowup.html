<!-- Custom input for displaying household members in a checkbox with followups. 
Created using householdOptionsCheckboxes and modifying it.
This needs to be custom because we're formatting the application data values that are displayed to the applicant on the screen -->
<th:block th:fragment="householdOptionsCheckboxesWithFollowup (input, data)"
          th:with="formInputName=${T(org.codeforamerica.shiba.pages.PageUtils).getFormInputName(input.name)},
                    inputData=${data.get(input.name)},
                    hasError=${!data.isValid() && !inputData.valid(data)},
                    hasHelpMessage=${input.helpMessageKey != null},
                    yourFullName=${input.options.datasources.get('personalInfo').get('firstName').value[0] + ' ' + input.options.datasources.get('personalInfo').get('lastName').value[0]},
                    needsAriaLabel=${input.needsAriaLabel()} ">
  <div class="form-group">

  <!-- replaced spacing-below-60 word-wrap-break-word with form-group -->
    <div class="spacing-above-35 form-group">
    <!-- replaced role="group" aria-labelledby="page-header" with class="spacing-above-35 form-group" -->
      <fieldset>
          <div class="question-with-follow-up" >
	          <div class="question-with-follow-up__question">
		          <div class="form-group">
		              <label th:for="householdMember-me" class="checkbox">
				          <input type="checkbox"
				                 th:id="householdMember-me"
				                 th:value="${yourFullName} + ' applicant'"
				                 th:name="${formInputName}"
				                 th:checked="${inputData.value.contains(fullName)}"
				                 th:attr="aria-describedby=${hasHelpMessage ? input.name + '-help-message' : ''},
		                                        aria-invalid=${hasError},
		                                        aria-label=${needsAriaLabel ? input.name : ''}"
		                         th:attrappend="data-follow-up=|#${input.name}-follow-up|">
		                	<span th:text="|${yourFullName} #{general.you}|"> </span>
	                    </label>   
		          </div>
	          </div>
	       </div>
          <div class="question-with-follow-up__follow-up" th:id="|${input.name}-follow-up|">
	          <!--div class="form-group" -->
			      <th:block th:each="followUp: ${input.followUps}">
			        <div
			            th:replace="'fragments/inputs/'+__${followUp.fragment()}__ :: __${followUp.fragment()}__(${followUp}, ${data})"></div>
			      </th:block> 
	          <!--/div -->
         </div>

        <th:block th:each="iteration, iterationStat: ${input.options.subworkflows.get('household')}">
            <div class="question-with-follow-up" >
	            <div class="question-with-follow-up__question">
	              <label th:for="|householdMember${iterationStat.count}|"
	                 class="checkbox"
	                 th:with="fullName=${iteration.getPagesData().get('householdMemberInfo').get('firstName').value[0]} + ' ' + ${iteration.getPagesData().get('householdMemberInfo').get('lastName').value[0]}">
			            <input type="checkbox"
			                   th:id="|householdMember${iterationStat.count}|"
			                   th:value="${fullName}"
			                   th:name="${formInputName}"
			                   th:checked="${inputData.value.contains(fullName)}"
			                   th:attr="aria-describedby=${hasHelpMessage ? input.name + '-help-message' : ''},
	                                        aria-invalid=${hasError},
	                                        aria-label=${needsAriaLabel ? input.name : ''}"
	                           th:attrappend="data-follow-up=|#${input.name}${iterationStat.count}-follow-up|">
			  
			                <span th:text="${fullName}"></span>
					</label>
	            </div>
			</div>
            <div class="question-with-follow-up__follow-up" th:id="|${input.name}${iterationStat.count}-follow-up|">
		      <th:block th:each="followUp: ${input.followUps}">
		    <!--  followUp.fragment() is single-input because it is a MONEY type -->
		    <!--/* TODO emj, we may need to number each so that we idenifty each iterated input.
		     single-input isn't created to insert iteration counts, may need to create a custion input type?
		    Or put a case switch in here with itation counts for each input type that we need as we need them?  */-->
		        <div th:replace="'fragments/inputs/'+__${followUp.fragment()}__ :: __${followUp.fragment()}__(${followUp}, ${data})">
		        </div>
		      </th:block>
			</div>
            
          
        </th:block>
      </fieldset>
    </div>
  </div>
</th:block>